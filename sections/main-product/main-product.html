{{!-- ============================================
pSEO 动态模板切换
当商品包含 custom.application 元字段时显示 B2B Landing Page
否则保持原有电商商品详情页布局
============================================ --}}

{{!-- 获取 pSEO 相关元字段 --}}
{{#var pseo_application = product | get_metafield("custom", "application") /}}
{{#var pseo_scene_image = product | get_metafield("custom", "scene_image") /}}
{{#var pseo_pain_point = product | get_metafield("custom", "pain_point") /}}
{{#var pseo_material_spec = product | get_metafield("custom", "material_spec") /}}
{{#var pseo_trust_badge = product | get_metafield("custom", "trust_badge") /}}
{{#var pseo_faq = product | get_metafield("custom", "faq") /}}
{{#var pseo_seo_title = product | get_metafield("custom", "seo_title") /}}
{{#var pseo_target_industry = product | get_metafield("custom", "target_industry") /}}

{{#if pseo_application}}
{{!-- ========== B2B Landing Page 布局 ========== --}}

{{!-- 内嵌 CSS 样式（因 Shopline 不支持添加新 CSS 文件） --}}
<style>
  /* ========== LUXURY DESIGN SYSTEM ========== */
  /* Based on frontend-design skill: Luxury / Refined direction */
  
  :root {
    /* Primary Palette - Luxury Gold & Deep Tones */
    --color-gold: #C9A962;
    --color-gold-light: #E8D5A3;
    --color-gold-dark: #9A7B3A;
    --color-champagne: #F7F3E8;
    
    /* Neutral Palette - Refined Darks */
    --color-charcoal: #1C1C1E;
    --color-graphite: #2C2C2E;
    --color-slate: #3A3A3C;
    --color-mist: #F5F5F7;
    --color-ivory: #FAFAF8;
    
    /* Typography */
    --font-primary: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-bold: 700;
    
    /* Spacing Rhythm - Non-uniform for visual interest */
    --space-xs: 8px;
    --space-sm: 16px;
    --space-md: 32px;
    --space-lg: 64px;
    --space-xl: 100px;
    --space-2xl: 140px;
    
    /* Refined Shadows */
    --shadow-subtle: 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-card: 0 4px 24px rgba(0, 0, 0, 0.06);
    --shadow-elevated: 0 12px 48px rgba(0, 0, 0, 0.08);
    --shadow-gold: 0 8px 32px rgba(201, 169, 98, 0.25);
    
    /* Transitions */
    --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-smooth: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-elegant: 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* ========== Page Load Animation ========== */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes shimmer {
    0% { background-position: -200% center; }
    100% { background-position: 200% center; }
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 4px 20px rgba(201, 169, 98, 0.3); }
    50% { box-shadow: 0 8px 40px rgba(201, 169, 98, 0.5); }
  }

  /* ========== Hero Banner Section ========== */
  .pseo-hero {
    position: relative;
    width: 100%;
    min-height: 85vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: var(--color-charcoal);
  }

  .pseo-hero__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.5;
    z-index: 1;
    filter: saturate(0.8);
  }

  /* Noise texture overlay for depth */
  .pseo-hero::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    z-index: 2;
    pointer-events: none;
  }

  .pseo-hero__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      180deg, 
      rgba(28, 28, 30, 0.4) 0%, 
      rgba(28, 28, 30, 0.7) 60%,
      rgba(28, 28, 30, 0.9) 100%
    );
    z-index: 3;
  }

  .pseo-hero__content {
    position: relative;
    z-index: 4;
    text-align: center;
    max-width: 900px;
    padding: 60px 24px;
    color: #ffffff;
    animation: fadeInUp 1s var(--transition-elegant) forwards;
  }

  .pseo-hero__application {
    display: inline-block;
    padding: 10px 28px;
    background: transparent;
    border: 1px solid var(--color-gold);
    color: var(--color-gold);
    font-family: var(--font-primary);
    font-size: 11px;
    font-weight: var(--font-weight-medium);
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 28px;
    animation: fadeInUp 0.8s var(--transition-elegant) 0.2s both;
  }

  .pseo-hero__title {
    font-family: var(--font-primary);
    font-size: clamp(2.2rem, 5vw, 4rem);
    font-weight: var(--font-weight-bold);
    line-height: 1.1;
    margin-bottom: 24px;
    letter-spacing: -0.02em;
    animation: fadeInUp 0.8s var(--transition-elegant) 0.3s both;
  }

  .pseo-hero__subtitle {
    font-family: var(--font-primary);
    font-size: clamp(1rem, 2vw, 1.15rem);
    font-weight: var(--font-weight-normal);
    opacity: 0.85;
    max-width: 560px;
    margin: 0 auto 40px;
    line-height: 1.7;
    letter-spacing: 0.01em;
    animation: fadeInUp 0.8s var(--transition-elegant) 0.4s both;
  }

  .pseo-hero__cta {
    display: inline-block;
    padding: 18px 48px;
    background: var(--color-gold);
    color: var(--color-charcoal);
    font-family: var(--font-primary);
    font-size: 13px;
    font-weight: var(--font-weight-bold);
    letter-spacing: 2px;
    text-transform: uppercase;
    text-decoration: none;
    border: none;
    transition: all var(--transition-smooth);
    animation: fadeInUp 0.8s var(--transition-elegant) 0.5s both, pulse-glow 3s ease-in-out infinite 1.5s;
  }

  .pseo-hero__cta:hover {
    background: var(--color-gold-light);
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(201, 169, 98, 0.4);
  }

  /* ========== Section Common ========== */
  .pseo-section-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px;
  }

  .pseo-section-title {
    text-align: center;
    font-family: var(--font-primary);
    font-size: clamp(1.6rem, 3vw, 2.4rem);
    font-weight: var(--font-weight-bold);
    letter-spacing: -0.01em;
    margin-bottom: 60px;
    color: var(--color-charcoal);
    position: relative;
  }

  /* Elegant underline accent */
  .pseo-section-title::after {
    content: "";
    display: block;
    width: 60px;
    height: 2px;
    background: var(--color-gold);
    margin: 20px auto 0;
  }

  /* ========== Pain Points ========== */
  .pseo-pain-points {
    padding: var(--space-xl) 24px var(--space-2xl);
    background: var(--color-ivory);
  }

  .pseo-pain-points__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 28px;
  }

  .pseo-pain-point-card {
    background: #ffffff;
    padding: 36px 32px;
    border: 1px solid rgba(0, 0, 0, 0.04);
    box-shadow: var(--shadow-card);
    transition: all var(--transition-smooth);
    position: relative;
    overflow: hidden;
  }

  /* Subtle gold accent line */
  .pseo-pain-point-card::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, var(--color-gold), var(--color-gold-light));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform var(--transition-smooth);
  }

  .pseo-pain-point-card:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-elevated);
  }

  .pseo-pain-point-card:hover::before {
    transform: scaleX(1);
  }

  .pseo-pain-point-card__icon {
    width: 48px;
    height: 48px;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-charcoal);
    color: var(--color-gold);
    font-size: 20px;
    font-weight: var(--font-weight-bold);
  }

  .pseo-pain-point-card__text {
    font-family: var(--font-primary);
    font-size: 0.95rem;
    line-height: 1.7;
    color: var(--color-slate);
  }

  /* ========== Material Specs ========== */
  .pseo-material-specs {
    padding: var(--space-2xl) 24px;
    background: var(--color-charcoal);
    color: #ffffff;
  }

  .pseo-material-specs .pseo-section-title {
    color: #ffffff;
  }

  .pseo-material-specs .pseo-section-title::after {
    background: var(--color-gold);
  }

  .pseo-material-specs__content {
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: 80px;
    align-items: center;
  }

  .pseo-material-specs__text {
    font-family: var(--font-primary);
    font-size: 1rem;
    line-height: 2;
    color: rgba(255, 255, 255, 0.8);
    white-space: pre-line;
  }

  .pseo-material-specs__gallery {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  .pseo-material-specs__gallery img {
    width: 100%;
    object-fit: cover;
    aspect-ratio: 1;
    transition: all var(--transition-smooth);
    filter: saturate(0.9);
  }

  .pseo-material-specs__gallery img:hover {
    filter: saturate(1);
    transform: scale(1.02);
  }

  /* ========== Product Gallery ========== */
  .pseo-product-gallery {
    padding: var(--space-xl) 24px var(--space-2xl);
    background: var(--color-ivory);
  }

  .pseo-product-gallery__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 24px;
  }

  .pseo-product-gallery__item {
    overflow: hidden;
    background: #fff;
    box-shadow: var(--shadow-subtle);
  }

  .pseo-product-gallery__item img {
    width: 100%;
    object-fit: cover;
    aspect-ratio: 1;
    transition: all var(--transition-elegant);
    filter: saturate(0.95);
  }

  .pseo-product-gallery__item:hover img {
    transform: scale(1.06);
    filter: saturate(1);
  }

  /* ========== Trust Badges ========== */
  .pseo-trust-badges {
    padding: var(--space-lg) 24px;
    background: var(--color-graphite);
    color: #ffffff;
  }

  .pseo-trust-badges .pseo-section-title {
    color: #ffffff;
  }

  .pseo-trust-badges__grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }

  .pseo-trust-badge {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 28px;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(201, 169, 98, 0.3);
    transition: all var(--transition-fast);
  }

  .pseo-trust-badge:hover {
    background: rgba(201, 169, 98, 0.1);
    border-color: var(--color-gold);
  }

  .pseo-trust-badge__icon {
    color: var(--color-gold);
    font-size: 22px;
  }

  .pseo-trust-badge__text {
    font-family: var(--font-primary);
    font-size: 0.9rem;
    font-weight: var(--font-weight-medium);
    letter-spacing: 0.02em;
  }

  /* ========== Inquiry Form ========== */
  .pseo-inquiry-section {
    padding: var(--space-2xl) 24px;
    background: var(--color-champagne);
  }

  .pseo-inquiry-container {
    max-width: 580px;
    margin: 0 auto;
    background: #ffffff;
    padding: 56px 48px;
    box-shadow: var(--shadow-elevated);
  }

  .pseo-inquiry-container .field__input {
    border: 1px solid #e0e0e0;
    padding: 16px 20px;
    font-family: var(--font-primary);
    font-size: 0.95rem;
    transition: all var(--transition-fast);
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 16px;
    background: var(--color-mist);
  }

  .pseo-inquiry-container .field__input:focus {
    border-color: var(--color-gold);
    background: #ffffff;
    outline: none;
    box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
  }

  .pseo-inquiry-container .field {
    display: block;
    margin-bottom: 16px;
  }

  .pseo-inquiry-container .field__label {
    display: none;
  }

  .pseo-inquiry-container .field__group {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .pseo-inquiry-container .button {
    width: 100%;
    padding: 18px;
    background: var(--color-charcoal);
    color: var(--color-gold);
    border: none;
    font-family: var(--font-primary);
    font-weight: var(--font-weight-bold);
    font-size: 13px;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all var(--transition-smooth);
  }

  .pseo-inquiry-container .button:hover {
    background: var(--color-gold);
    color: var(--color-charcoal);
    transform: translateY(-2px);
    box-shadow: var(--shadow-gold);
  }

  /* ========== FAQ Section ========== */
  .pseo-faq-section {
    padding: var(--space-xl) 24px var(--space-2xl);
    background: #ffffff;
  }

  .pseo-faq-list {
    max-width: 760px;
    margin: 0 auto;
  }

  .pseo-faq-item {
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
    padding: 32px 0;
  }

  .pseo-faq-item:last-child {
    border-bottom: none;
  }

  .pseo-faq-question {
    font-family: var(--font-primary);
    font-size: 1.1rem;
    font-weight: var(--font-weight-bold);
    color: var(--color-charcoal);
    margin-bottom: 14px;
    display: flex;
    align-items: flex-start;
    gap: 16px;
    letter-spacing: -0.01em;
  }

  .pseo-faq-question::before {
    content: "Q";
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 32px;
    height: 32px;
    background: var(--color-charcoal);
    color: var(--color-gold);
    font-size: 13px;
    font-weight: var(--font-weight-bold);
    flex-shrink: 0;
  }

  .pseo-faq-answer {
    font-family: var(--font-primary);
    font-size: 1rem;
    line-height: 1.8;
    color: var(--color-slate);
    padding-left: 48px;
  }

  /* ========== Industry Tag ========== */
  .pseo-industry-tag {
    display: inline-block;
    padding: 8px 20px;
    background: transparent;
    border: 1px solid var(--color-gold-light);
    color: var(--color-gold-light);
    font-family: var(--font-primary);
    font-size: 11px;
    font-weight: var(--font-weight-medium);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-top: 16px;
  }

  /* ========== Responsive ========== */
  @media (max-width: 768px) {
    .pseo-hero {
      min-height: 70vh;
    }

    .pseo-hero__content {
      padding: 40px 20px;
    }

    .pseo-pain-points,
    .pseo-product-gallery,
    .pseo-faq-section {
      padding: var(--space-lg) 16px;
    }

    .pseo-material-specs,
    .pseo-inquiry-section {
      padding: var(--space-lg) 16px;
    }

    .pseo-material-specs__content {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .pseo-inquiry-container {
      padding: 36px 24px;
    }

    .pseo-inquiry-container .field__group {
      grid-template-columns: 1fr;
    }

    .pseo-trust-badges__grid {
      flex-direction: column;
      align-items: stretch;
    }

    .pseo-trust-badge {
      justify-content: center;
    }
  }
</style>

{{!-- Hero Banner Section --}}
<section class="pseo-hero">
  {{!-- 尝试获取 scene_image：文件类型元字段可能有多种结构 --}}
  {{#if pseo_scene_image.value.src}}
  <img class="pseo-hero__background" src="{{pseo_scene_image.value.src}}"
    alt="{{pseo_application.value}} - {{product.title}}" loading="eager" />
  {{#else/}}
  {{#if pseo_scene_image.value.url}}
  <img class="pseo-hero__background" src="{{pseo_scene_image.value.url}}"
    alt="{{pseo_application.value}} - {{product.title}}" loading="eager" />
  {{#else/}}
  {{#if pseo_scene_image.value}}
  <img class="pseo-hero__background" src="{{pseo_scene_image.value}}"
    alt="{{pseo_application.value}} - {{product.title}}" loading="eager" />
  {{#else/}}
  {{#if product.featured_media}}
  <img class="pseo-hero__background" src="{{product.featured_media.preview_image.src}}" alt="{{product.title}}"
    loading="eager" />
  {{/if}}
  {{/if}}
  {{/if}}
  {{/if}}
  <div class="pseo-hero__overlay"></div>
  <div class="pseo-hero__content">
    <span class="pseo-hero__application">{{pseo_application.value}}</span>
    {{!-- 优先使用 SEO 标题，否则使用商品标题 --}}
    {{#if pseo_seo_title}}
    <h1 class="pseo-hero__title">{{pseo_seo_title.value}}</h1>
    {{#else/}}
    <h1 class="pseo-hero__title">{{product.title}}</h1>
    {{/if}}
    {{!-- Description removed from Hero as per user request --}}
    {{#if pseo_target_industry}}
    <span class="pseo-industry-tag">{{pseo_target_industry.value}}</span>
    {{/if}}
    <a href="#pseo-inquiry" class="pseo-hero__cta">Get Free Quote</a>
  </div>
</section>

{{!-- Detailed Description Section --}}
<section class="pseo-description-section">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Product Details</h2>
    <div class="pseo-description-content">
      {{{product.description}}}
    </div>
  </div>
</section>

<style>
  .pseo-description-section {
    padding: var(--space-xl) 24px var(--space-lg);
    background: #ffffff;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
  }

  .pseo-description-content {
    max-width: 860px;
    margin: 0 auto;
    font-family: var(--font-primary);
    font-size: 1.05rem;
    line-height: 1.9;
    color: var(--color-slate);
  }

  .pseo-description-content h2 {
    font-family: var(--font-primary);
    font-size: 1.6rem;
    font-weight: var(--font-weight-bold);
    margin-top: 48px;
    margin-bottom: 24px;
    color: var(--color-charcoal);
    letter-spacing: -0.01em;
  }

  .pseo-description-content h3 {
    font-family: var(--font-primary);
    font-size: 1.25rem;
    font-weight: var(--font-weight-bold);
    margin-top: 36px;
    margin-bottom: 16px;
    color: var(--color-charcoal);
  }

  .pseo-description-content p {
    margin-bottom: 24px;
  }

  .pseo-description-content ul {
    margin-bottom: 24px;
    padding-left: 24px;
  }

  .pseo-description-content li {
    margin-bottom: 12px;
    position: relative;
  }

  .pseo-description-content li::marker {
    color: var(--color-gold);
  }
</style>

{{!-- Pain Points Section (用 || 分割多卡片展示) --}}
{{#if pseo_pain_point}}
<section class="pseo-pain-points">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Why Choose This Fabric for {{pseo_application.value}}?</h2>
    <div class="pseo-pain-points__grid">
      {{#var pain_items = pseo_pain_point.value | split("||") /}}
      {{#for item in pain_items}}
      {{#if item | trim() | size() > 0}}
      <div class="pseo-pain-point-card">
        <div class="pseo-pain-point-card__icon">✓</div>
        <p class="pseo-pain-point-card__text">{{item | trim()}}</p>
      </div>
      {{/if}}
      {{/for}}
    </div>
  </div>
</section>
{{/if}}

{{!-- Material Specifications Section --}}
{{#if pseo_material_spec}}
<section class="pseo-material-specs">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Material Specifications</h2>
    <div class="pseo-material-specs__content">
      <div class="pseo-material-specs__info">
        <p class="pseo-material-specs__text">{{pseo_material_spec.value}}</p>
      </div>
      <div class="pseo-material-specs__gallery">
        {{#for media in product.media}}
        {{#if forloop.index <= 4}} <div class="pseo-product-gallery__item">
          <img src="{{media.preview_image.src}}" alt="{{product.title}} - Image {{forloop.index}}" loading="lazy" />
      </div>
      {{/if}}
      {{/for}}
    </div>
  </div>
  </div>
</section>
{{/if}}

{{!-- Product Gallery Section --}}
<section class="pseo-product-gallery">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Product Gallery</h2>
    <div class="pseo-product-gallery__grid">
      {{#for media in product.media}}
      <div class="pseo-product-gallery__item">
        <img src="{{media.preview_image.src}}" alt="{{product.title}} - Gallery {{forloop.index}}" loading="lazy" />
      </div>
      {{/for}}
    </div>
  </div>
</section>

{{!-- Trust Badges Section (用 || 分割多徽章展示) --}}
{{#if pseo_trust_badge}}
<section class="pseo-trust-badges">
  <div class="pseo-section-container">
    <div class="pseo-trust-badges__grid">
      {{#var badge_items = pseo_trust_badge.value | split("||") /}}
      {{#for badge in badge_items}}
      {{#if badge | trim() | size() > 0}}
      <div class="pseo-trust-badge">
        <span class="pseo-trust-badge__icon">✓</span>
        <span class="pseo-trust-badge__text">{{badge | trim()}}</span>
      </div>
      {{/if}}
      {{/for}}
    </div>
  </div>
</section>
{{/if}}

{{!-- Inquiry Form Section --}}
<section class="pseo-inquiry-section" id="pseo-inquiry">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Request a Free Consultation</h2>
    <div class="pseo-inquiry-container">
      <theme-contact-form class="contact-form">
        {{#contact_form}}
        {{#if form.posted_successfully}}
        {{#component "tips-card/tips-card" type="success" text="Thank you! We will contact you shortly." /}}
        {{/if}}

        {{#if form.errors.messages}}
        {{#component "tips-card/tips-card" type="error" text=form.errors.messages /}}
        {{/if}}

        {{!-- 隐藏字段：记录来源产品和应用场景 --}}
        <input type="hidden" name="contact[product_title]" value="{{product.title}}" />
        <input type="hidden" name="contact[product_url]" value="{{request.origin | append(product.url)}}" />
        <input type="hidden" name="contact[application]" value="{{pseo_application.value}}" />

        <div class="field__group">
          <label class="field">
            <input class="field__input" autocomplete="name" type="text" name="contact[name]" value="{{form.name}}"
              placeholder="Your Name *" required />
          </label>

          <label class="field">
            <input class="field__input" autocomplete="organization" type="text" name="contact[company]"
              placeholder="Company Name" />
          </label>
        </div>

        <div class="field__group">
          <label class="field">
            <input class="field__input" autocomplete="email" type="email" name="contact[email]" value="{{form.email}}"
              placeholder="Email Address *" required />
          </label>

          <label class="field">
            <input type="tel" class="field__input" autocomplete="tel" name="contact[phone]" pattern="[0-9\-]*"
              value="{{form.phone}}" placeholder="Phone Number" />
          </label>
        </div>

        <label class="field">
          <input type="text" class="field__input" name="contact[quantity]"
            placeholder="Estimated Quantity (yards/meters)" />
        </label>

        <label class="field">
          <textarea rows="5" class="field__input textarea" name="contact[comment]"
            placeholder="Tell us about your project requirements...">{{form.body}}</textarea>
        </label>

        <div class="contact-form__button">
          <button type="submit" class="button">
            Submit Inquiry
          </button>
        </div>
        {{/contact_form}}
      </theme-contact-form>
    </div>
  </div>
</section>

{{!-- FAQ Section (用 || 分割多个QA，内部用 Q:/A: 标记) --}}
{{#if pseo_faq}}
<section class="pseo-faq-section">
  <div class="pseo-section-container">
    <h2 class="pseo-section-title">Frequently Asked Questions</h2>
    <div class="pseo-faq-list">
      {{!-- FAQ 格式：每个问答用 || 分隔，内容格式 Q: xxx A: yyy --}}
      {{#var faq_blocks = pseo_faq.value | split("||") /}}
      {{#for block in faq_blocks}}
      {{#if block | trim() | size() > 0}}
      <div class="pseo-faq-item">
        <div class="pseo-faq-question">{{block | trim()}}</div>
      </div>
      {{/if}}
      {{/for}}
    </div>
  </div>
</section>
{{/if}}

{{!-- pSEO 优化的结构化数据 --}}
<script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      {{#if pseo_seo_title}}
        "name": "{{pseo_seo_title.value}}",
      {{#else/}}
        "name": "{{pseo_application.value}} Fabric - {{product.title}}",
      {{/if}}
      "url": "{{{request.origin | append(product.url)}}}",
      {{#if pseo_scene_image}}
        "image": ["{{{pseo_scene_image.value}}}"],
      {{#else/}}
        {{#if product.featured_media}}
          "image": ["{{{product.featured_media.preview_image.src}}}"],
        {{/if}}
      {{/if}}
      "description": {{{product.description | strip_html() | json()}}},
      "category": "{{pseo_application.value}}",
      {{#if pseo_target_industry}}
        "industry": "{{pseo_target_industry.value}}",
      {{/if}}
      {{#if pseo_material_spec}}
        "material": "{{pseo_material_spec.value}}",
      {{/if}}
      "brand": {
        "@type": "Brand",
        "name": "{{product.vendor}}"
      },
      "offers": {
        "@type": "AggregateOffer",
        "priceCurrency": "{{localization.country.currency.iso_code}}",
        "availability": "http://schema.org/InStock",
        "offerCount": "{{product | get_variants() | size()}}",
        "lowPrice": "{{product.price_min | divided_by(100, integer=false)}}",
        "highPrice": "{{product.price_max | divided_by(100, integer=false)}}"
      }
    }
  </script>

{{#else/}}
{{!-- ========== 原有电商商品详情页布局 ========== --}}
{{#capture content}}
{{#blocks}}
{{#if forblock.type == "$product-media" || forblock.type == "$product-media-group"}}
{{#block order=forblock.index /}}
{{/if}}
{{/blocks}}
{{#blocks}}
{{#if forblock.type == "$product-info"}}
{{#block order=forblock.index /}}
{{/if}}
{{/blocks}}
{{/capture}}

{{#component "product/detail" product=product can_update_url=true content=content section_type="main-product" /}}

{{#var seo_variants = product | get_variants() /}}
{{#var seo_media /}}

{{~#if product.selected_or_first_available_variant.featured_media}}
{{#set seo_media = product.selected_or_first_available_variant.featured_media /}}
{{~#else/}}
{{#set seo_media = product.featured_media /}}
{{~/if}}

<script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      "name": "{{product.title}}",
      "url": "{{{request.origin | append(product.url)}}}",
      {{#if seo_media}}
        "image": [
          "{{{seo_media.preview_image.src}}}"
        ],
      {{/if}}
      "description": {{{product.description | strip_html() | json()}}},
      {{#if product.selected_or_first_available_variant.sku}}
        "sku": "{{product.selected_or_first_available_variant.sku}}",
      {{/if}}
      "brand": {
        "@type": "Brand",
        "name": "{{product.vendor}}"
      },
      "offers": [
        {{#for variant in seo_variants}}
          {
            "@type" : "Offer",
            {{#if variant.sku}}
              "sku": "{{variant.sku}}",
            {{/if}}
            {{#if variant.barcode | size() == 12}}
              "gtin12": "{{variant.barcode}}",
            {{/if}}
            {{#if variant.barcode | size() == 13}}
              "gtin13": "{{variant.barcode}}",
            {{/if}}
            {{#if variant.barcode | size() == 14}}
              "gtin14": "{{variant.barcode}}",
            {{/if}}
            "availability" : "http://schema.org/{{#if variant.available}}InStock{{#else/}}OutOfStock{{/if}}",
            "price" : "{{variant.price | divided_by(100, integer=false)}}",
            "priceCurrency" : "{{localization.country.currency.iso_code}}",
            "url": "{{{request.origin | append(variant.url)}}}"
          }{{#if !forloop.last}},{{/if}}
        {{/for}}
      ]
    }
  </script>
{{/if}}

{{#schema}}
{
"name": "t:sections.main_product.name",
"settings": [
{
"type": "color_scheme",
"id": "color_scheme",
"label": "t:sections.main_product.settings.color_scheme.label",
"default": "scheme-1"
},
{
"type": "style.layout",
"id": "layout",
"label": "t:sections.main_product.settings.layout.label",
"default": {
"flex-direction": "row",
"flex-wrap": "nowrap",
"row-gap": "60px",
"column-gap": "60px",
"@media (--mobile)": {
"flex-direction": "column",
"row-gap": "20px",
"column-gap": "20px"
}
}
},
{
"type": "style.spacing",
"id": "spacing",
"label": "t:sections.main_product.settings.spacing.label",
"default": {
"padding-block-start": "60px",
"padding-block-end": "60px",
"@media (--mobile)": {
"padding-block-start": "20px",
"padding-block-end": "20px"
}
}
}
],
"blocks": [
{
"type": "$product-media-group",
"limit": 1
},
{
"type": "$product-info",
"limit": 1
}
]
}
{{/schema}}