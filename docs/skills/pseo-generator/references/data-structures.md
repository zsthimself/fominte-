# Data Structures & Cleaning Rules

## Product Scenario Matrix (`data/product-scenario-matrix.json`)

Generated by `npm run generate-matrix`.

```json
[
  {
    "productId": "gid://shopline/Product/123456789",
    "productTitle": "FT25-123 Sequin Fabric",
    "scenario": "Evening Gown",
    "painPoints": [
      "Need fabric that drapes well for formal wear",
      "Requires high-quality sequins that don't fall off"
    ],
    "faq": [
      {
        "question": "Is this fabric suitable for heavy beading?",
        "answer": "Yes, the base mesh is reinforced..."
      }
    ],
    "trustBadge": "Certified Oeko-Tex Standard 100",
    "seoTitle": "Luxury Sequin Fabric for Evening Gowns | Wholesale",
    "seoDescription": "Shop premium sequin fabric perfect for evening gowns..."
  }
]
```

## CSV Export Format (`data/pseo-new-products.csv`)

Generated by `npm run export-csv`. Compatible with Shopline import.

| Column | Description | Example |
| :--- | :--- | :--- |
| `Handle` | Unique URL slug | `evening-gown-sequin-fabric` |
| `Title` | Cleaned product title | `Embroidery Fabric for Evening Gown` |
| `Body (HTML)` | Rich HTML description | `<h3>Why Choose...</h3><ul>...</ul>` |
| `Standardized Product Type` | Category (Empty for Orphan) | `(empty)` |
| `SEO Title` | Optimized title tag | `Luxury Sequin Fabric...` |
| `SEO Description` | Meta description | `Shop premium...` |
| `Metafield: scene_image` | URL to scenario image | `https://.../gown.jpg` |

## Auto-Cleaning Rules

Applied during the export step (`npm run export-csv`):

1.  **Title Cleaning**:
    - Removes SKU patterns (e.g., `FT25-xxx`, `YJ-xxx`).
    - Injects "Embroidery Fabric" if missing.
    - Example: `FT25-123 Blue Sequin` -> `Blue Sequin Embroidery Fabric`.

2.  **SEO Cleaning**:
    - Applies the same cleaning logic to SEO Title and Description.

3.  **Orphan Page Strategy**:
    - Sets `Standardized Product Type` to empty string.
    - This ensures products are created but not assigned to any collection/menu, effectively making them "orphan pages" until linked via the Shadow Directory.
